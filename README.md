# LogCollector: 운영 효율을 코드로 구현하다

단순히 로그를 쌓는 시스템은 많습니다. 하지만 LogCollector는 쏟아지는 로그 스트링을 **식별 가능한 도메인 객체**로 전환하여, 운영 환경에서 반복적으로 발생하는 문제를 백엔드 아키텍처 관점에서 해결하고자 시작된 프로젝트입니다.

이 프로젝트는 운영 문제를 그대로 자동화하는 데 목적이 있지 않습니다. 로그를 어떻게 모델링하고, 어떻게 구조화하면 이후 분석·확장·지식화가 가능한 시스템이 되는지를 코드로 검증하는 데 초점을 둡니다.

---

## 1. 프로젝트 배경: 왜 만들었는가?

운영 환경에서 마주하는 로그는 대개 두 가지 한계를 가집니다.

* **반복되는 노이즈**: 동일한 에러가 ID나 Timestamp만 바뀐 채 수만 건씩 쌓여, 정작 중요한 장애 신호를 가립니다.
* **데이터의 파편화**: 로그는 많지만, "이 에러의 원인이 무엇이고 어떻게 대응했는지"에 대한 지식 단위로 축적되지 않습니다.

저는 이 문제를 단순 운영 자동화 도구가 아닌, **객체지향적 도메인 설계와 수집 파이프라인 구조화**를 통해 백엔드 시스템 관점에서 해결하고자 했습니다.

---

## 2. 핵심 아이디어: 로그를 '도메인'으로 취급하기

LogCollector에서 에러 로그는 단순 문자열이 아니라, 고유한 식별자와 상태를 가지는 도메인 객체입니다.

### 해시 기반 중복 식별 (Normalized Hashing)

* 메시지 내 가변 요소(UUID, 숫자 ID, 날짜 등)를 정규표현식으로 제거
* `serviceName + normalizedMessage` 조합으로 SHA-256 해시 생성
* 수만 건의 로그를 하나의 **에러 유형(Error Signature)** 으로 식별

이를 통해 로그 중복 제거를 넘어, 이후 분석·지식화의 기준이 되는 **안정적인 식별자**를 확보합니다.

### 상태 전이 모델링

에러 로그는 다음과 같은 명확한 상태를 가집니다.

* NEW
* IN_PROGRESS
* RESOLVED

이는 로그를 단순 기록이 아닌, **관리 및 분석 대상 객체**로 다루기 위한 도메인 모델링입니다.

---

## 3. 주요 구현 특징

### 수집 파이프라인 구조화 (경량 큐 기반)

로그 수집 과정에서 요청 처리와 저장 책임을 분리하기 위해, **비동기 처리 구조를 고려한 경량 큐(Redis List)** 를 수집 파이프라인에 포함시켰습니다.

* **Ingestion**: 로그 수집 API는 Redis List에 메시지를 적재한 뒤 즉시 응답을 반환하여, 수집 시점의 부하를 최소화합니다.
* **Consumption**: 별도의 Consumer가 큐를 주기적으로 처리하여 MariaDB에 저장함으로써, 쓰기 부하를 분산합니다.

이 구조는 향후 Kafka 등 전문 메시징 시스템으로의 확장을 염두에 둔 **단계적 설계 선택**입니다.

### 조회 및 검색 최적화

* Querydsl 기반 동적 쿼리 구성
* 서비스명, 기간, 상태 등 다중 조건 조회 지원
* 에러 식별 해시 기준의 일관된 조회 모델

---

## 4. AI 분석과 확장 설계

### AI 에러 분석 (구현 완료)

AI 분석 기능은 **의도적으로 상태를 저장하지 않는 구조**로 설계·구현되어 있습니다.

* 에러 로그 단건 또는 동일 해시 그룹을 입력으로 사용
* OpenAI API를 통한 일회성 분석 호출
* 분석 결과는 DB에 영속화하지 않고 즉시 반환

이를 통해 AI 분석은 시스템의 핵심 상태를 오염시키지 않는 **보조 분석 레이어**로 동작합니다. 현재 Slack 연동과 예외 처리 보완을 마무리 중이며, 기본 분석 흐름은 이미 구현되어 있습니다.

### Knowledge Base(KB) 확장 (다음 단계)

다음 단계에서는 에러 해시를 Key로 하는 Knowledge Base(KB) 구현을 시작할 예정입니다.

* 에러 원인 정리
* 재발 조건
* 대응 및 복구 절차

을 구조화하여, 로그 → 에러 유형 → 지식으로 이어지는 흐름을 완성하는 것이 목표입니다.

---

## 5. 기술 스택

* **Language & Framework**: Java 17, Spring Boot 3.x
* **Data**: MariaDB, Spring Data JPA, Querydsl
* **Messaging**: Redis (List 기반 경량 큐)
* **Infrastructure**: Docker, GitHub Actions (CI)

---

## 정리

LogCollector는 로그 수집 도구를 만드는 프로젝트가 아니라,

* 로그를 도메인으로 모델링하고
* 식별 가능한 단위로 구조화하며
* 이후 지식화와 분석으로 확장 가능한 기반을 설계

하는 것을 목표로 한 백엔드 중심 프로젝트입니다.

운영에서 출발했지만, 구현과 설계의 초점은 일관되게 **개발 영역의 문제**에 맞춰져 있습니다.
